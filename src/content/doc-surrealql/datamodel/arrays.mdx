---
sidebar_position: 2
sidebar_label: Arrays
title: Arrays | SurrealQL
description: Records in SurrealDB can store arrays of values, with no limit to the depth of the arrays

---

import Since from "@components/shared/Since.astro";

# Arrays

## Overview

An array is a collection of values contained inside `[]` square brackets, each of which is stored at a certain index. Individual indexes and slices of indexes can be accesses using the same square bracket syntax.

```surql
-- Return a full array
RETURN [1,2,3,4,5];
-- Return the first ("zeroeth") item
RETURN [1,2,3,4,5][0];
-- Return indexes 0 to 2 of an array
RETURN [1,2,3,4,5][0..=2];
```

```bash title="Output"
-------- Query 2 (200µs) --------

[
	1,
	2,
	3,
	4,
	5
]

-------- Query 3 (99.999µs) --------

1

-------- Query 4 (100.001µs) --------

[
	1,
	2,
	3
]
```

Working with arrays is one of the most important skills when working with SurrealDB, as [`SELECT`](/docs/surrealql/statements/select) statements return an array of values by default unless the `ONLY` keyword is used on an array that contains a single item.

```surql
-- Even this returns an array
SELECT * FROM 9;
-- Use the `ONLY` clause to return a single item
SELECT * FROM ONLY 9;
-- Error: array has more than one item
SELECT * FROM ONLY [1,9];
```

```bash title="Output"
-------- Query 1  --------

[
	9
]

-------- Query 2 --------

9

-------- Query 3 --------

'Expected a single result output when using the ONLY keyword'
```

Similar to Object-based Record IDs, records in SurrealDB can store arrays of values, with no limit to the depth of the arrays. Arrays can store any value stored within them, and can store different value types within the same array.

```surql
CREATE person SET results = [
	{ score: 76, date: "2017-06-18T08:00:00Z", name: "Algorithmics" },
	{ score: 83, date: "2018-03-21T08:00:00Z", name: "Concurrent Programming" },
	{ score: 69, date: "2018-09-17T08:00:00Z", name: "Advanced Computer Science 101" },
	{ score: 73, date: "2019-04-20T08:00:00Z", name: "Distributed Databases" },
];
```

A maximum number of items can be specified for an array.

```surql
DEFINE FIELD employees ON TABLE team TYPE array<record<employee>, 5>;
CREATE team SET employees = [
	employee:one, 
	employee:two, 
	employee:three, 
	employee:four, 
	employee:five, 
	employee:doesnt_belong
];
```

```bash title="Response"
'Expected a array<record<employee>, 5> but the array had 6 items'
```

## Mapping and filtering on arrays

The `[]` operator after an array can also be used to filter the items inside an array. The parameter `$this` is used to refer to each individual item, while `WHERE` (or its alias `?`) is used to set the condition for the item to pass the filter.

```surql
[true, false, true][WHERE $this = true];
```

```bash title="Output"
[true, true]
```

If a `WHERE` or `?` clause finds an item that by itself is not equal to `true` or `false`, it will check the item's [truthiness](/docs/surrealql/datamodel/values#values-and-truthiness) to determine whether to pass it on or not.

```surql
[1,2,NONE][? $this];

-- [1,2]
```

Filtering can be repeated if desired.

```surql
[
    {
        name: "Boston",
        population: NONE,
        first_mayor: "John Phillips"
    },
    {
        name: "Smurfville",
        population: 55,
        first_mayor: "Papa Smurf"
    },
    {
        name: "Harrisburg",
        population: 50183,
        first_mayor: NONE
    }
][WHERE $this.population]
 [WHERE $this.first_mayor];
```

```bash title="Output"
[
	{
		first_mayor: 'Papa Smurf',
		name: 'Smurfville',
		population: 55
	}
]
```

## Sets

<Since v="v2.0.0" />

## Filtering and mapping with array functions

SurrealDB 2.0 added a number of methods for arrays that make it easier to filter and map. These methods take a closure (an anonymous function) that works in a similar way to the `$this` parameter above.

Here is an example of the `array::filter()` method being used in contrast to the classic `WHERE` syntax. Note that the parameter name inside the closure is named by the user, so `$val` in the example below could be `$v` or `$some_val` or anything else.

```surql
[1,3,5].filter(|$val| $val > 2);
[1,3,5][WHERE $this > 2];

-- [3,5]
```

The `array::map()` function

```surql
[1,2,3].map(|$item| $item + 1);

-- [2,3,4]
```

```surql
[1,2,3]
	.map(|$item| $item + 1)
	.filter(|$val| $val > 1)
	.

-- [2,3,4]
```

```surql
[1,2,3].map(|$v, $i| "At index " + <string>$i + " we got a " + <string>$v + "!");
```